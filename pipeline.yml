resources:
  - name: source-code
    type: git
    source:
      uri: https://github.com/BuiXuanKhoi/Bookshop-project.git
      branch: test-deploy
jobs:


  - name: test
    plan:
      - get: source-code
        trigger: true
      - file: source-code/ci/tasks/maven-test.yml
        task: mvn-test

  - name: package
    plan:
      - get: source-code
        passed: 
          - test
        trigger: true
      - file: source-code/ci/tasks/maven-package.yml
        task: mvn-package
    serial: true
        


  # - name: deploy
  #   plan:
  #     - get: source-code
  #       trigger: true
  #     - task: deploy
  #       config:
  #         platform: linux
  #         image_resource:
  #           type: docker-image
  #           source:
  #             repository: ubuntu
  #         inputs:
  #           - name: source-code
  #         run:
  #           path: source-code/ci/deploy.sh



